<!DOCTYPE html>
<html lang="en">
	<head>
        <meta charset="UTF-8">
	    <title>Team Charts</title>
	    <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <script src="https://code.jquery.com/jquery-1.10.0.min.js"></script>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.2/underscore.js"></script>

        <script src="//cdnjs.cloudflare.com/ajax/libs/d3/3.5.5/d3.js" charset="UTF-8"></script>
        <script src="//cdnjs.cloudflare.com/ajax/libs/react/0.12.2/react.js" charset="UTF-8"></script>
	    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.12.2/JSXTransformer.js"></script>
	    <script src="js/react-d3-components.js"></script>

        <link rel="stylesheet/less" type="text/css" href="styles/main.less">
        <link href="//elements.storebrand.no/storebrand.ny/0.50/css/stb-main.css" type="text/css" rel="stylesheet"/>
    </head>
    <body>
		<!-- containers -->
		<div id="example"></div>
        <div class="wrapper">
            <div class="flex-parent flex-column">
                <div class="flex-item" id="chart1">
                </div>
                <div class="flex-item flex-parent">
                    <div class="flex-item">
                        Content here
                    </div>
                    <div class="flex-item weight-2">
                        Content here
                    </div>
                </div>
            </div>
        </div>

        <script type="text/jsx">
            var BarChart = ReactD3.BarChart;

            var data = [{
                label: 'somethingA',
                values: [{x: 'SomethingA', y: 10}, {x: 'SomethingB', y: 4}, {x: 'SomethingC', y: 3}]
            }];

            React.render(
                    <BarChart
                            data={data}
                            width={400}
                            height={400}
                            margin={{top: 10, bottom: 50, left: 50, right: 10}}/>,
                    document.getElementById('chart1')
            );
        </script>

        <script type="text/jsx">
      		var App = React.createClass({

      			loadChartDataFromServer: function() {
				    $.ajax({
				      url: this.props.url,
				      dataType: 'json',
				      success: function(data) {
				        this.setState({data: data});
				      }.bind(this),
				      error: function(xhr, status, err) {
				        console.error(this.props.url, status, err.toString());
				      }.bind(this)
				    });
				},

      			componentDidMount: function(){
      				this.loadChartDataFromServer();
      				setInterval(this.loadChartDataFromServer, this.props.pollInterval);
   				},	

      			getInitialState:function(){
				    return {
				      query: '',
				      data: {},
				      id: 0
				    }
				},

				getDefaultProps:function(){
			    	return {
			      		txt: 'this is a default prop',
			      		cat: 0
			    	}
			  	},

			  	update: function(e){
					this.setState({query: e.target.value});
				},

      			propTypes: {
      				txt: React.PropTypes.string,
      				cat: React.PropTypes.number.isRequired
      			},
      			render: function() {
      				return (
      					<div>
      						<input type="text" onChange={this.update} />
      						<br/>
      						<span>{this.props.txt} {this.props.cat}</span>
        					<h1>Hello, world!</h1>
        					<span>{this.state.query}</span>
        				</div>
        			)	
      			}	
      		});

      		React.render(<App txt="this is the props" url="http://date.jsontest.com" pollInterval={5000} />, document.getElementById('example'));
    </script>
    <script src="js/less.min.js" type="text/javascript"></script>
  </body>
</html>
